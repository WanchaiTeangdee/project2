<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤ - ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏£‡∏≤‡∏¢‡∏õ‡∏µ | U-Nai Dee</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏£‡∏≤‡∏¢‡∏õ‡∏µ ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏ó‡∏¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á">
</head>
<body class="site-bg">
    <header class="site-header">
        <div class="container">
            <h1 class="brand"><i class="fas fa-building"></i> U-Nai Dee</h1>
            <nav>
                <a href="index.html"><i class="fas fa-city"></i> ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î</a>
                <a href="house.html" style="color:#2563eb;font-weight:700;border-bottom:2px solid #2563eb"><i class="fas fa-home"></i> ‡∏ö‡πâ‡∏≤‡∏ô</a>
            </nav>
            <div class="user-area" id="user-area">
                <a href="login.html" id="login-link" class="btn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
                <a href="signup.html" id="signup-link" class="btn">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="search" aria-labelledby="search-heading">
            <h2 id="search-heading"><i class="fas fa-home"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤</h2>
            <div class="search-row">
                <input id="search-input" type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà" aria-label="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤"> 
                <select id="period-select" aria-label="‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ä‡πà‡∏≤">
                    <option value="month">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
                    <option value="year">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option>
                </select>
                <button id="search-btn"><i class="fas fa-search"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
            </div>
        </section>

        <section class="map-section">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                <h2>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</h2>
                <div>
                    <button id="locate-btn" class="btn">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</button>
                </div>
            </div>
            <div id="map" style="height:360px;border-radius:12px;overflow:hidden"></div>
        </section>

        <section id="listings" class="listings" aria-live="polite">
            <h2><i class="fas fa-home"></i> ‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤</h2>
            <div id="listings-grid" class="grid"></div>
        </section>

        <section id="about" class="about">
            <h2>‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö</h2>
            <p>‡∏ô‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡πÅ‡∏ï‡∏ï‡∏¥‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏ò‡∏¥‡∏ï‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå JSON ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô localStorage)</p>
        </section>
    </main>

    <div id="booking-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="modal-content" role="document">
            <button class="modal-close" id="modal-close" aria-label="‡∏õ‡∏¥‡∏î">√ó</button>
            <h3 id="modal-title">‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</h3>
            <div id="modal-body"></div>
            <form id="booking-form">
                <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á
                    <input name="name" required>
                </label>
                <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•
                    <input name="email" type="email" required>
                </label>
                <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤
                    <select name="period" id="booking-period">
                        <option value="month">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
                        <option value="year">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option>
                    </select>
                </label>
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤
                    <input name="duration" id="booking-duration" type="number" min="1" value="1" required>
                    <small>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏µ ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</small>
                </label>
                <p id="booking-total" style="font-weight:600">‡∏£‡∏ß‡∏°: -</p>
                <div class="modal-actions">
                    <button type="submit" class="btn primary">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
                    <button type="button" class="btn" id="modal-cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <footer class="site-footer">
        <div class="container">
            <p>¬© <span id="year"></span> U-Nai Dee ‚Äî ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</p>
        </div>
    </footer>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal" style="display:none">
        <div class="modal-content" style="max-width:500px">
            <button class="modal-close" onclick="closeProfileModal()" aria-label="‡∏õ‡∏¥‡∏î">√ó</button>
            <h3 style="margin:0 0 20px 0;font-size:24px">üë§ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h3>
            
            <!-- View Mode -->
            <div id="profile-view-mode">
                <div style="background:#f9fafb;padding:20px;border-radius:12px;margin-bottom:20px">
                    <div style="margin-bottom:15px">
                        <label style="display:block;font-weight:600;margin-bottom:5px;color:#374151;font-size:14px">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                        <input type="text" id="profile-username" readonly style="width:100%;padding:10px 12px;border:1.5px solid #e5e7eb;border-radius:8px;background:#fff;color:#1f2937">
                    </div>
                    <div style="margin-bottom:15px">
                        <label style="display:block;font-weight:600;margin-bottom:5px;color:#374151;font-size:14px">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                        <input type="text" id="profile-email" readonly style="width:100%;padding:10px 12px;border:1.5px solid #e5e7eb;border-radius:8px;background:#fff;color:#1f2937">
                    </div>
                    <div style="margin-bottom:15px">
                        <label style="display:block;font-weight:600;margin-bottom:5px;color:#374151;font-size:14px">‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</label>
                        <input type="text" id="profile-role" readonly style="width:100%;padding:10px 12px;border:1.5px solid #e5e7eb;border-radius:8px;background:#fff;color:#1f2937">
                    </div>
                    <div>
                        <label style="display:block;font-weight:600;margin-bottom:5px;color:#374151;font-size:14px">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà</label>
                        <input type="text" id="profile-created" readonly style="width:100%;padding:10px 12px;border:1.5px solid #e5e7eb;border-radius:8px;background:#fff;color:#1f2937">
                    </div>
                </div>
                
                <div id="profile-owner-request" style="margin-top:18px;display:none;text-align:center">
                    <button id="profile-request-owner-btn" class="btn" style="background:linear-gradient(135deg,#059669 0%,#38bdf8 100%);color:white;padding:12px 24px;border-radius:8px;font-weight:600;width:100%"><i class="fas fa-home"></i> ‡∏Ç‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÄ‡∏ä‡πà‡∏≤</button>
                    <div id="profile-request-owner-status" style="margin-top:10px;color:#059669;font-weight:600;font-size:14px"></div>
                </div>
                
                <div style="margin-top:20px;display:flex;gap:10px;justify-content:flex-end">
                    <button id="edit-profile-btn" class="btn" style="background:#3b82f6;color:white;padding:10px 20px;border-radius:8px">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
                    <button class="btn" onclick="closeProfileModal()">‡∏õ‡∏¥‡∏î</button>
                </div>
            </div>
            
            <!-- Edit Mode -->
            <div id="profile-edit-mode" style="display:none">
                <form id="edit-profile-form">
                    <div style="background:#f9fafb;padding:20px;border-radius:12px;margin-bottom:20px">
                        <div style="margin-bottom:15px">
                            <label style="display:block;font-weight:600;margin-bottom:5px;color:#374151;font-size:14px">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                            <input type="text" id="edit-profile-username" readonly style="width:100%;padding:10px 12px;border:1.5px solid #e5e7eb;border-radius:8px;background:#e5e7eb;color:#6b7280;cursor:not-allowed">
                            <small style="color:#6b7280;font-size:12px">* ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ</small>
                        </div>
                        <div style="margin-bottom:15px">
                            <label style="display:block;font-weight:600;margin-bottom:5px;color:#374151;font-size:14px">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                            <input type="email" id="edit-profile-email" required style="width:100%;padding:10px 12px;border:1.5px solid #3b82f6;border-radius:8px;background:#fff;color:#1f2937">
                        </div>
                        <div style="margin-bottom:15px">
                            <label style="display:block;font-weight:600;margin-bottom:5px;color:#374151;font-size:14px">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                            <input type="password" id="edit-profile-password" placeholder="‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô" style="width:100%;padding:10px 12px;border:1.5px solid #3b82f6;border-radius:8px;background:#fff;color:#1f2937">
                        </div>
                        <div>
                            <label style="display:block;font-weight:600;margin-bottom:5px;color:#374151;font-size:14px">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                            <input type="password" id="edit-profile-confirm-password" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà" style="width:100%;padding:10px 12px;border:1.5px solid #3b82f6;border-radius:8px;background:#fff;color:#1f2937">
                        </div>
                    </div>
                    
                    <div style="display:flex;gap:10px;justify-content:flex-end">
                        <button type="button" id="cancel-edit-profile-btn" class="btn" style="background:#6b7280;color:white;padding:10px 20px;border-radius:8px">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        <button type="submit" class="btn" style="background:#10b981;color:white;padding:10px 20px;border-radius:8px">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Chat Modal -->
    <div id="chat-modal" class="modal" aria-hidden="true" style="z-index:9999;">
        <div class="modal-content" style="max-width:420px;max-height:90vh;overflow-y:auto;display:flex;flex-direction:column;">
            <div class="modal-header" style="font-size:20px;font-weight:600;">üí¨ ‡πÅ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å
                <button onclick="closeChatModal()" style="float:right;font-size:22px;background:none;border:none;cursor:pointer">√ó</button>
            </div>
            <div id="chat-messages" style="flex:1 1 0;min-height:200px;max-height:350px;overflow-y:auto;padding:10px 0 10px 0;"></div>
            <form id="chat-form" style="display:flex;gap:8px;margin-top:10px;">
                <input id="chat-input" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." autocomplete="off" style="flex:1 1 0;padding:10px 12px;border-radius:8px;border:1.5px solid #e5e7eb;">
                <button type="submit" class="btn" style="background:#2563eb;color:white;">‡∏™‡πà‡∏á</button>
            </form>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="app.js" defer></script>
</body>
</html>